{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 3bdfce33bd49041ba41b","webpack:///./~/blueimp-canvas-to-blob/js/canvas-to-blob.min.js","webpack:///./src/index.js","webpack:///./src/ngProvider.js"],"names":["svg2Image","params","appendCSS","cssText","element","refNode","hasChildNodes","children","styleElement","document","createElement","setAttribute","innerHTML","insertBefore","getCSSStyles","parentElement","extractedCSSText","i","styleSheets","length","file","cssRules","rules","r","getSVGString","svgNode","cssStyleText","serializer","XMLSerializer","svgString","serializeToString","replace","svgString2Image","width","height","callback","base64","btoa","unescape","encodeURIComponent","imgsrc","canvas","context","getContext","image","Image","onload","clearRect","drawImage","toBlob","blob","base64ForSrc","src","svgSize","svg","getBoundingClientRect","tryToFix","angular","module","provider","$get","init"],"mappings":"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","file":"svg-2-image-ngProvider.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"svg-2-image\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"svg-2-image\"] = factory();\n\telse\n\t\troot[\"svg-2-image\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3bdfce33bd49041ba41b","!function(t){\"use strict\";var e=t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype,o=t.Blob&&function(){try{return Boolean(new Blob)}catch(t){return!1}}(),n=o&&t.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(t){return!1}}(),r=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder,a=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,i=(o||r)&&t.atob&&t.ArrayBuffer&&t.Uint8Array&&function(t){var e,i,l,u,b,c,d,B,f;if(e=t.match(a),!e)throw new Error(\"invalid data URI\");for(i=e[2]?e[1]:\"text/plain\"+(e[3]||\";charset=US-ASCII\"),l=!!e[4],u=t.slice(e[0].length),b=l?atob(u):decodeURIComponent(u),c=new ArrayBuffer(b.length),d=new Uint8Array(c),B=0;B<b.length;B+=1)d[B]=b.charCodeAt(B);return o?new Blob([n?d:c],{type:i}):(f=new r,f.append(c),f.getBlob(i))};t.HTMLCanvasElement&&!e.toBlob&&(e.mozGetAsFile?e.toBlob=function(t,o,n){t(n&&e.toDataURL&&i?i(this.toDataURL(o,n)):this.mozGetAsFile(\"blob\",o))}:e.toDataURL&&i&&(e.toBlob=function(t,e,o){t(i(this.toDataURL(e,o)))})),\"function\"==typeof define&&define.amd?define(function(){return i}):\"object\"==typeof module&&module.exports?module.exports=i:t.dataURLtoBlob=i}(window);\n//# sourceMappingURL=canvas-to-blob.min.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/blueimp-canvas-to-blob/js/canvas-to-blob.min.js\n// module id = 0\n// module chunks = 0 1","// Import this to pollyfil the `canvas.toBlob` function\nimport 'blueimp-canvas-to-blob/js/canvas-to-blob.min.js';\n\nfunction svg2Image(params) {\n  function appendCSS(cssText, element) {\n    const refNode = element.hasChildNodes() ? element.children[0] : null;\n    let styleElement = document.createElement('style');\n\n    styleElement.setAttribute('type', 'text/css');\n    styleElement.innerHTML = cssText;\n    element.insertBefore(styleElement, refNode);\n  }\n\n  function getCSSStyles(parentElement) {\n    // Extract CSS Rules\n    var extractedCSSText = '';\n\n    for (let i = 0; i < document.styleSheets.length; i++) {\n      const file = document.styleSheets[i];\n\n      if (!file.cssRules) {\n        continue;\n      }\n\n      const rules = file.cssRules;\n\n      for (let r = 0; r < rules.length; r++) {\n        extractedCSSText += rules[r].cssText;\n      }\n    }\n\n    return extractedCSSText;\n  }\n\n  function getSVGString(svgNode) {\n    svgNode.setAttribute('xlink', 'http://www.w3.org/1999/xlink');\n    const cssStyleText = getCSSStyles(svgNode);\n\n    appendCSS(cssStyleText, svgNode);\n\n    let serializer = new XMLSerializer();\n    let svgString = serializer.serializeToString(svgNode);\n\n    // Fix root xlink without namespace\n    svgString = svgString.replace(/(\\w+)?:?xlink=/g, 'xmlns:xlink=');\n    // Safari NS namespace fix\n    svgString = svgString.replace(/NS\\d+:href/g, 'xlink:href');\n\n    return svgString;\n  }\n\n  function svgString2Image(svgString, width, height, callback) {\n    // Convert SVG string to data URL\n    var base64 = btoa(unescape(encodeURIComponent(svgString)));\n    var imgsrc = 'data:image/svg+xml;base64,' + base64;\n\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n\n    canvas.width = width;\n    canvas.height = height;\n\n    let image = new Image();\n\n    image.onload = function() {\n      context.clearRect(0, 0, width, height);\n      context.drawImage(image, 0, 0, width, height);\n\n      canvas.toBlob(function(blob) {\n        callback({\n          blob: blob,\n          base64: base64,\n          base64ForSrc: imgsrc\n        });\n      });\n    };\n\n    image.src = imgsrc;\n  }\n\n  // The code (?)\n  const svgSize = params.svg.getBoundingClientRect();\n\n  if (params.tryToFix) {\n    params.svg.setAttribute('width', svgSize.width + 'px');\n    params.svg.setAttribute('height', svgSize.height + 'px');\n    params.svg.setAttribute('style', '');\n  }\n\n  const svgString = getSVGString(params.svg);\n\n  // passes Blob to the callback\n  svgString2Image(\n    svgString,\n    svgSize.width,\n    svgSize.height,\n    params.callback\n  );\n};\n\nexport default svg2Image;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import svg2Image from './index.js';\n\n(function(svg2Image) {\n  angular.module('ngSvg2Image', [])\n    .provider('svg2Image', function() {\n      this.$get = function() {\n        return svg2Image;\n      };\n\n      this.init = function() {};\n    });\n})(svg2Image);\n\n\n\n// WEBPACK FOOTER //\n// ./src/ngProvider.js"],"sourceRoot":""}